---
title: "Geoducation"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#getwd()
# Uncoment the following line and replace the path by yours
setwd('/Users/aureliengarret/Google\ Drive/Master\ 1\ MIAGE/Statistiques/Geoducation')
```
\begin{center}
\textit{Antoine Drouhin, Aurélien Garret, Cécile Hu, Lucas Morel}
\end{center}
# TODO, Note/CR de Réunion avec la prof :
* décrire la base de données : taille, variable quanti ou quali (à faire pour la présentation orale)
* Ségrégation scolaire
* Idée :
  * Essayer de faire une classif sur les différents tx de réussite et les filières (pas étonné qu'en ts gros tx de réussite, qu'en L non etc,...) Essayer de voir pourquoi meilleur on est meilleur on sera et vice versa.
  * Choisir un indcateur de réussite, créer un indictauer en addtionnant les tx de réussite par lycée, puis régréssion pouvoir si dépend de la filière et de la géographie.
  * Secteur pivéé/public
  * Rural/urbain
  * Puis régréssion synthétique
  * Cherche taille des communes pour joindre


## Introduction

### Base de données

Notre de base de données à été trouvée sur le site Data.gouv. 
Nous avons croisé deux jeux de données distincts. Le premier concerne des données sur la performance des lycées en France (taux de réussite etc). Le second présente des données géographiques pour l’ensemble des établissement scolaires francais (Coordonnées GPS, etc.).

<https://www.data.gouv.fr/fr/>

Nous avons choisi cette base car elle présente une approche intéressante sur la compréhension d’un sujet qui nous concerne tous, l’éducation.
L’approche géographique des question de réussite scolaire nous a semblé être un champs suffisamment complet pour permettre l’utilisation des méthodes d’analyse vue en cours.

L'intérêt et le questionnement général porte sur la réussite scolaire de la France en fonction de la position géographique des établissements scolaires. Y’a t-il une corrélation entre la situation géographique des établissements et la réussite scolaire des étudiants ?

Plusieurs problématiques en découlent comme :

Y’a t-il des différences de réussites entre le top 10 des grandes villes en France et les villes de province ?
Paris bénéficie-t-elle d’une réussite supérieure au reste de la France ?
Quelles régions de France semble réussir mieux que les autres ?

#### Initialisation de la base de donnée

```{r}
read.csv2("geoducation-data2.csv", sep=";", header=TRUE, na.strings = "")->bdd
#exists('bdd')
```

## Khi-Deux

```{r}

bddKhiDeux = bdd[, c('Académie','Effectif.Présents.série.L','Effectif.Présents.série.ES','Effectif.Présents.série.S')]
# Petit clean des datas (Antoine)
bddKhiDeux[is.na(bddKhiDeux)] <- 0

# Cette portion de code supporse que bdd est ordonné par nom d'académie. (Antoine)

tableKhiDeux <- data.frame()
indiceCourant = 1
aca <- bddKhiDeux[1,"Académie"]

for(i in 1:nrow(bddKhiDeux)){
  if(aca != bddKhiDeux[i,"Académie"]){
    indiceCourant = indiceCourant + 1
    aca <- bddKhiDeux[i,"Académie"]
  } 
  if (length(rownames(tableKhiDeux)) != 0 && !is.na(tableKhiDeux[indiceCourant,"Académie"]) && bddKhiDeux[i,"Académie"] == tableKhiDeux[indiceCourant,"Académie"] ){
    tableKhiDeux[indiceCourant,"ES"] <- tableKhiDeux[aca,"ES"] + bddKhiDeux[i,"Effectif.Présents.série.ES"]
    tableKhiDeux[indiceCourant,"L"] <- tableKhiDeux[aca,"L"] + bddKhiDeux[i,"Effectif.Présents.série.L"]
    tableKhiDeux[indiceCourant,"S"] <- tableKhiDeux[aca,"S"] + bddKhiDeux[i,"Effectif.Présents.série.S"]
  } else {
    tableKhiDeux <- rbind(tableKhiDeux, data.frame(Académie = aca,ES = bddKhiDeux[i,"Effectif.Présents.série.ES"], S = bddKhiDeux[i,"Effectif.Présents.série.S"], L = bddKhiDeux[i,"Effectif.Présents.série.L"]))
  }
}
```

Ici on a crée notre tableau pour effectuer notre test du Khi Deux (nous deux)

```{r}
print(tableKhiDeux)
```

On procede maintenant aux étapes du khi deux :

1 Calcul des effectifs théoriques

```{r}
khideux <- chisq.test(tableKhiDeux[,c('S','ES','L')])
print(khideux)
```

La probabilité que la situation géographique soit indépendante de la répartition dans les différentes filiéres est donc inférieure à 2.2e-16.



